<!DOCTYPE html>
<html>
<head>
    <title>Study Master: 15</title>
    <style>
        body { background: #89b4fa; font-family: 'Arial Black', sans-serif; text-align: center; }
        .stats { display: flex; justify-content: space-around; max-width: 320px; margin: 10px auto; background: white; padding: 10px; border-radius: 10px; }
        #grid { 
            display: grid; grid-template-columns: repeat(4, 1fr); gap: 10px; 
            background: #444; padding: 15px; border-radius: 10px; width: 320px; margin: 0 auto;
            border: 5px solid #222;
        }
        .tile { 
            width: 70px; height: 70px; background: #b08d57; color: #fff; 
            font-size: 24px; display: flex; align-items: center; justify-content: center; 
            border-radius: 5px; cursor: pointer; border-bottom: 4px solid #5d4037;
        }
        .empty { background: transparent; border: none; }
        .back-btn { background: #c0c0c0; border: 4px solid #fff; border-bottom: 4px solid #606060; width: 350px; padding: 15px; font-size: 18px; margin-top: 20px; cursor: pointer; }
    </style>
</head>
<body>
    <h1>15 PUZZLE</h1>
    <div class="stats">
        <div>TIME: <span id="time">0</span>s</div>
        <div>MOVES: <span id="moves">0</span></div>
    </div>
    <div id="grid"></div>
    <button class="back-btn" onclick="window.location.href='../index.html'">RETURN TO HOME</button>

    <script>
        let tiles = [1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,0];
        let moves = 0, timer = 0, interval = null;

        function shuffle() {
            for (let i = tiles.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [tiles[i], tiles[j]] = [tiles[j], tiles[i]];
            }
            render();
        }

        function render() {
            const grid = document.getElementById('grid');
            grid.innerHTML = '';
            tiles.forEach((num, i) => {
                const div = document.createElement('div');
                div.className = num === 0 ? 'tile empty' : 'tile';
                div.innerText = num === 0 ? '' : num;
                div.onclick = () => move(i);
                grid.appendChild(div);
            });
        }

        function move(i) {
            const emptyIdx = tiles.indexOf(0);
            const isAdjacent = [i-1, i+1, i-4, i+4].includes(emptyIdx);
            
            if (isAdjacent) {
                if (!interval) interval = setInterval(() => { timer++; document.getElementById('time').innerText = timer; }, 1000);
                [tiles[i], tiles[emptyIdx]] = [tiles[emptyIdx], tiles[i]];
                moves++;
                document.getElementById('moves').innerText = moves;
                render();
                checkWin();
            }
        }

        function checkWin() {
            const win = tiles.every((val, i) => val === (i === 15 ? 0 : i + 1));
            if (win) {
                clearInterval(interval);
                alert(`YOU WON! Time: ${timer}s Moves: ${moves}`);
            }
        }

        shuffle();
    </script>
</body>
</html>